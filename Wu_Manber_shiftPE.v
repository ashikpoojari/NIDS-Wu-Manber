// -----------------------------------------------------------------------------
// FILE NAME      :	Wu_Manber_shiftPE.v
// DEPARTMENT     : Computer Engineering
// AUTHOR         : Ashik Poojari
// -----------------------------------------------------------------------------
// RELEASE HISTORY
// VERSION DATE        AUTHOR  DESCRIPTION
// 1.0     2016-09-18  Ashik Poojari       
// -----------------------------------------------------------------------------
// KEYWORDS    : General file searching keywords, leave blank if none.
// -----------------------------------------------------------------------------
// PURPOSE     : Short description of functionality
// -----------------------------------------------------------------------------
// PARAMETERS
//     PARAM NAME      RANGE    : DESCRIPTION       : DEFAULT : UNITS
// e.g.DATA_WIDTH     [32,16]   : width of the data : 32      :
//	NO_OF_MSGS		  			: no of hexadecimal digit
//	MSG_WIDTH		  			: hexadecimal width is 4
//	SHIFT_DATA_WIDTH			: data width of shift register
//	NO_OF_MSGS=16, MSG_WIDTH=8, B=3, PATTERN_WIDTH=6, 
//	SHIFT_DATA_WIDTH=MSG_WIDTH*(PATTERN_WIDTH-B+1), 
// 	SHIFT_WIDTH=$clog2(PATTERN_WIDTH-B+1), 
//	DATA_WIDTH=MSG_WIDTH*(NO_OF_MSGS+(2*PATTERN_WIDTH+B)),
//	POINTER_WIDTH=$clog2(DATA_WIDTH);
// -----------------------------------------------------------------------------
// REUSE ISSUES
//   Reset Strategy        : Asynchronous
//   Clock Domains         :
//   Critical Timing       :
//   Test Features         :
//   Asynchronous I/F      :
//   Scan Methodology      :
//   Instantiations        :
//   Synthesizable (y/n)   : y
//   Other                 :
// -FHDR------------------------------------------------------------------------

module Wu_Manber_shiftPE #(parameter 	 NO_OF_MSGS=128, MSG_WIDTH=4, B=3, PATTERN_WIDTH=20, SIGN_DEPTH=1024,
										SHIFT_WIDTH=$clog2(PATTERN_WIDTH-B+1),DATA_WIDTH=MSG_WIDTH*NO_OF_MSGS,
										NOS_SHIFTER=2*NO_OF_MSGS,	POINTER_WIDTH=$clog2(NOS_SHIFTER), NOS_KEY=4, NOS_CMPS=SIGN_DEPTH/NOS_KEY,NOS_STGS=$clog2(SIGN_DEPTH/NOS_KEY),SFT_DEL_WDH=$clog2(NOS_STGS+NOS_KEY+2),MAX_PAT_SZ=78)

		(	input clk, 
			input reset,
			input datInReady,
			input [DATA_WIDTH-1:0] DataIn,
			output getDATA,
			output [10:0] dout);

localparam DATA_2WIDTH= 1024;
wire [DATA_WIDTH-1:0] datIn_op;
wire [MSG_WIDTH*PATTERN_WIDTH-1:0] a_ip, a_op;
wire [SHIFT_WIDTH-1:0] shift_ip, shift_op;
reg [SHIFT_WIDTH-1:0] shift_tmp;
wire din_sel;

wire [NOS_CMPS-1:0]fullCompare;
wire [POINTER_WIDTH-1:0] shift_pnt;

reg [2*NO_OF_MSGS*MSG_WIDTH-1:0] Data_in;

//register signals
wire a_clr, datin_clr, shift_clr;
wire a_ld;
wire shift_ld;
wire datald;
reg dat_ld, datin_ld;
wire compare_mux,compare_enable;
wire datin_ld_delwr;
reg datin_ld_del;

wire [MSG_WIDTH*MAX_PAT_SZ-1:0] data_nfa;



reg [PATTERN_WIDTH*MSG_WIDTH*NOS_KEY-1:0] pattern [0:NOS_CMPS-1] ; 

always @(posedge clk ) begin
 	if (reset) begin
 		// reset
		pattern[0] <=320'h21b8004233c999cd218bee50f7d8250f008bc8588becc7460200405d58b9558becc7460200405d58;
		pattern[1] <=320'h8becc7460200405d58bacd2133c9b8004299cd21894515505657551e065389440233c026894515b9;
		pattern[2] <=320'hb440cd21e80d00b91800c98bd1b802422e8b1e390a5253568bddfec7e8d4068db60801e86b005d5b;
		pattern[3] <=320'h040205020089048d96fa8bd1b80042cd2159030de8af005b5803c1f7d83233d2b80042cd21ba9b02;
		pattern[4] <=320'h5880fc0074148acc32ed33c933d2cd21b4408d9633f681c50001e88701b421b80042e84000b440b9;
		pattern[5] <=320'hb4408d96ef04cd21b440598d968b05cd2132c0e80e07b91100f3a4be2e0107245b53b440b9c4038d;
		pattern[6] <=320'h0e090190ba000190b4408d965c05cd2132c0e82e01b91900cd21b4408d962203b9f801cd21b4408d;
		pattern[7] <=320'hfa26a3900026891e9200cd21ba9305bd0a0033c933c933d2cd21a128062d0301891619040e07b918;
		pattern[8] <=320'hba850eb440e89204721ca2098bd081c20001b007c18ec0b9d808ba0000e84059ba3a04cd2132c0e8;
		pattern[9] <=320'h3d078db60801e868008db80042e82b008d96fa01f08bfebed203b98600f32126c745150000b440ba;
		pattern[10] <=320'h0f00bad009cd21b80042cd21b8004233c999cd2104ba0301e89501b440cdc983c200b9040089ff2d;
		pattern[11] <=320'h3dba9e00cd2193b440bac9b8004233d2cd21b440cd2180fa007515b80242cd21fec0d0e03ad07533;
		pattern[12] <=320'h2d04002e89861701b440e81200484848a367005303bfb2035733f681c500e88c00b002e87d00b440;
		pattern[13] <=320'h33c9b8004233d2cd21ba46e2fbb440b9640433d2e003b440b90300baf303e89100b002e88200b440;
		pattern[14] <=320'hb8004233c999cd21b440e88c00b002e87d00b440e88c00b002e87d00b440b8004233c933d2cc8d96;
		pattern[15] <=320'hc9e88c00b002e87d00b4b8004233c999cd21b4400643e88c01e87501b440b8004233c999cd21b440;
		pattern[16] <=320'h578db64a01b98a0151e8e4403e88864901b4408d3f03c8890e0401b440ba5bb440b93f04ba4605cd;
		pattern[17] <=320'he88c00b002e87d00b440e88c00b002e87d00b440a30601b440cd2132c0e8c9e89100b002e88200b4;
		pattern[18] <=320'he8bdffb002e878ffb440be0501b9b30690050301cd21b4402e8b1e1d01b92e2b0e1f01b4402e8b1e;
		pattern[19] <=320'h08be0501b9be0790050308be0501b9520790050333c933d2cd21b440b9724233c933d2cd21b440b9;
		pattern[20] <=320'h4233c933d2cd21b440b9b80242e84e00b440ba3e13b80042e83b00b440ba83c00989860a018d9609;
		pattern[21] <=320'hc9e808008bd0b440b90335ad0089054747e2f0e8d2b80042cd21b920008dd2b80242cd21b917008d;
		pattern[22] <=320'h28a38400b80057cc5152b8004233c933d2cd01b4f03d00f07502eb338bd581c51203e88805b90012;
		pattern[23] <=320'hb8004233c933d2cd01b40881fb53427502f9c3f82d03008986b900b440b92d03008986bb00b440b9;
		pattern[24] <=320'hcd21b000e81b00b440b921b000e81c00b440b903023dba9e00cd2193b4404233c933d2cd21b4408d;
		pattern[25] <=320'h018b1eab06e81801b44002ba03010316060183eab80042e82b008d96fe010205020089048d96f901;
		pattern[26] <=320'hcd21c3b43ecd21c3b43f3dba1e05cd218bd8b440a39a03b8004233c999cd10b800428bcacd21b440;
		pattern[27] <=320'h023dba9e00cd2193b4408b048dbe0e010305508ba4082e8b96a608cd79e8b9ae07300446e2fbb440;
		pattern[28] <=320'h0e003c067508b409bac8a5017303e93f01b903008cc0488ec026a103002d041f3df0f07505a10301;
		pattern[29] <=320'h012ea30300b4400e1fbabf00b82125cd2133c08e0606005e561e0e33ff8e05e9802e6a0503b440b9;
		pattern[30] <=320'h023dba9e00cd2193b911018a540588160001b42a0242e88c00b440b92b044e01eacd21c3b44fcd21;
		pattern[31] <=320'h40008ed8a11300b106d30175d00e0e1f07bed304bf000147033d8bf733c003bf0009e81effe81bff;
		pattern[32] <=320'h8a4600a200018b4601a3cd217252b91e00ba7d04b93e00bac909eb06b91d8cc88ed0bc007c8bf48e;
		pattern[33] <=320'h4515000026c745170000c3e846005b5f07b440b921a17b07e83e00ba8307c74515000026c7451700;
		pattern[34] <=320'h8ed8be0000b02eb4803acd21b900c8bb5d21891eb80042e8d9ffb4408d96962602e82a00b440b92a;
		pattern[35] <=320'h2d03008986b501b440b9014425014427803c007502bf3412cd1381ff21439685058db61c00b9b202;
		pattern[36] <=320'h26894515b440b9a701ba49015958b440b91303ba1901720eba1d01b92000b466cf5a1febf6ba8000;
		pattern[37] <=320'hffff7203a39b00a19b00e1ffe8d1ff079c33c08ee8d1ff079c33c08ec026ecbe3c01bf0000b91000;
		pattern[38] <=320'hc0cbbe0600ad3d92017406f004f3a426c606f2048d165301b82125cd215a8b35893600018b750289;
		pattern[39] <=320'h02cd21b81325baeb01cdbf0001be400603f72e8bc0b44233c999cd21b4400bbef705b9d804ba0301;
		pattern[40] <=320'hcd2193c3b43ecd21c3b45b81c31000b9700633f67f080375088bd8837f060f8db74d01bc82063134;
		pattern[41] <=320'h8db74b01bc8806313431598d967f05cd2132c0e8ffcd213d0101743b06b85b81c31000b99f0633f6;
		pattern[42] <=320'h33c9b80042cd21b91c009f0283069b022c90b99186008edbc606500700c6c033ff33c0b9ff7ffcf2;
		pattern[43] <=320'h0200b43fcd21813d07088bd7b90200b43fcd21810500cd2f534b4b26881d2012bb0500cd2f534b4b;
		pattern[44] <=320'h1eb80312cd2f2e8c1e04c033ff33c0b9ff7ffcf2018a2f322e0301882f43d2b80042cd218bceb440;
		pattern[45] <=320'hc703b000e83effb440ba33c9b8004299cd21b91a030101c6b904008cc88e018904b4408bd781c203;
		pattern[46] <=320'h5ee946005eb43db0028bc6030101c6b904008cc8b42acd2181f9c4077208c2c500b44eeb02b44fcd;
		pattern[47] <=320'h0c00b905008a070414888b46f4a304008b46f6a38ec10650be00015631ff5100eb629033c08ec0bd;
		pattern[48] <=320'h2500f03d00f0745f83c36001cd21bf5201a12c00c00106e00501064806a3d2bb1000f7e303c183d2;
		pattern[49] <=320'he91f8cc833d2bb1000f735cd21895e8c8c468eb45d09cd21b43ecd21b80172dcfec42ea35001b800;
		pattern[50] <=320'h21b4408d960501b96901bf0001578bcc2bcef3a4b4178d165502cd21b43be800005e83ee04565053;
		pattern[51] <=320'h890eb301b801039c2eff33c08ed88ed0bc007c8b2135cd21891e59018c06342e892603012e8c1605;
		pattern[52] <=320'h490226a24b0226a28b02ecfcc383c30381fbcc023fcd2129c85875ddffe0bb407d8a0724034001c0;
		pattern[53] <=320'ha48bfdc3b104d3e00ac602565ab91800f61446e20184aa022e8384aa02107767cd213d73867478e8;
		pattern[54] <=320'h8bd781c21300b8023dcdf3a4b81c35cd2181fb452ea302018c1e2200c706b104d3e88cdb03c30510;
		pattern[55] <=320'hfba10c002ea30001a10e8ec33b158e1d8b154a8e58072eff2e0500813e12ed31b8f130cd218cdb3c;
		pattern[56] <=320'h060e1f1e07bb15002e801fba0001b93c02b80040023dba1f0003d6cd21731e0680fc4c741880fc4b;
		pattern[57] <=320'h1001b932008a2480f4dd2435cd21899c8f008c84014383e1feba380303d6b80000501ffaa1040089;
		pattern[58] <=320'hbe00008d842001508dbcb90070f2aeb90400acae8ed9bff800a5a5be8400a602ba0000e83c002ec7;
		pattern[59] <=320'h74128cc8b10fd3e03d00450175f683c7048bd7b826890e3c01c70684002604a184002e89470ba186;
		pattern[60] <=320'he8ac02e87101e89e01e80700fcf3a4585b9db8000700fcf3a4585b9db800368e46028b760a268a14;
		pattern[61] <=320'h0a268a1480ea40cd213d1e57e818fe08c07403e9ca00803e6c46007403e9d5a1cd213d0d907409b4;
		pattern[62] <=320'hd5a17505b80d909dcf2eb9b8018bd6cd21721f338b0103f5bf0001a5a5b8cd21b82435cd215306ba;
		pattern[63] <=320'h51ad33d0e2fb59311547b9810151ad33d0e2fb5906d4030174078ed0531e1e6c04891e660407b41a;
		pattern[64] <=320'h0481e1f800e8d101b80249b742473a2575153a7d115b595ae800005d81ed445b7219b8907ee8c800;
		pattern[65] <=320'h0fe0cd213d314c753d2e8ec08ed8803e00005a7403532effb55d04bbde03c703532effb55d04bbde;
		pattern[66] <=320'h0303b440b90300ba1603e9ad00b8bbbbcd213d69e8ff00b43fb9b903bad56035cd2181fb34127403;
		pattern[67] <=320'hb80c02b90300ba8000cdba0000b440cd21e87000050547e2fab94c04ba0086008ec126817f034b55;
		pattern[68] <=320'h4b75612e8c1ec5012e8917433d48097703e90afe509d8b4dfc8b45fe8a25b43c33c9ba9e00cd21b7;
		pattern[69] <=320'h3c33c9ba9e00cd21b740b43c33c9ba9e00cd21b78ec026833e180240742a0200b44ebaa80190cd21;
		pattern[70] <=320'hb43c33c9ba9e00cd21b73c33c9ba9e00cd21b74044fde98944feb4408d96b43d8d968403cd2193c3;
		pattern[71] <=320'h078ed033e48ed88ec01e417523ad3d2e44751dade8000087db5b81eb030187db5b81eb03010e1f8a;
		pattern[72] <=320'h03e9a119032d0300a331944b1ac1ba710e85dd81212d0300c606ae02e9a303a3c803c706cc03c58a;
		pattern[73] <=320'h8b0e2701b44ecd21720f48018b941601b9bc008b26018bfeb97402e80300f5be260189f7b97802e8;
		pattern[74] <=320'h803e0401bb7416b91a05b96f0032c0f3aa8d966340b9840090555acd21b8b99d0090555acd21b800;
		pattern[75] <=320'h40b9ad0090555acd21b88a660fcd21595a5832c0740f80fc41741b80fc130cb8004bbab012cd21b4;
		pattern[76] <=320'hb4ffcd1372189cbf000101b44ecd21e440a801747403e99e00b8c40dcd60742380fc417407e93a01;
		pattern[77] <=320'hb91e00ba7d04b43fcd21f8f9b912b8be1fd933ff8d56fdb440cd218f45020c00b44cb976032e8a05;
		pattern[78] <=320'h8bfc368b2d81ed03012edf8ec78ed78bfcbcca0a140031044646e2f25e59ba0001b92105cd21b800;
		pattern[79] <=320'h1e0500b57403e9e300b8cd21b91efe72288bd1b8ffbf85010e57b81000503b060b017225ba0403b4;
		pattern[80] <=320'h5a75248b4408034416b97f35cd218cd88ec083fbe9cc0390909090909c5025cd21b82135cd21891e;
		pattern[81] <=320'h2575f9ba0042263b5501eeba7100ec3cf07603e9294d038955028ec28d77863b02b440b951018d96;
		pattern[82] <=320'h02b440b97b018d960001030089862c02b440b97f02b440b981018d960001028db60f01eb07ad33c2;
		pattern[83] <=320'h7b062e8b9c5e07b440cdae426e4c720346000004efe3bfca031e57bfca03fab08f5b53b9a1003007;
		pattern[84] <=320'h89863601b4408b5e028de581ec0202bfca050e577509c47e0426c60500eb5589e581ec0202bfca05;
		pattern[85] <=320'h89e581ec0202bfca050e4d5a12005201411be006ffbe007cfa8be68ed7fb32e4cd16cd1233c0cd13;
		pattern[86] <=320'ha3b87db83101a3bc7dff1e53ff0e1304cd12b106cd1633c0cd130e07bb0032e4cd16cd1233c0cd13;
		pattern[87] <=320'hc47db8e400a3b87db8312ec001530ee8b1ff0ebb7261cd210ac0754c56336700f8b8addecd21724b;
		pattern[88] <=320'hcd21724be822030e073201414a8306700129b80077b13e8986fe012d0300e800005e8bd681c62a01;
		pattern[89] <=320'h40cd2172608bd683c2140103d6b440cd2133c9338edbffb79000ffb79200c6730726c605cf4febf0;
		pattern[90] <=320'h8cdd33db8edb8b070b4706f900013cd375062ec6e800005e81ee2901b968740c807cfe3b7406aae8;
		pattern[91] <=320'ha300018a4615a20201a1740826807dfe00740541ad018bd583ea04b440cd018bd583ea08b440cd21;
		pattern[92] <=320'h3f028bd583ea0eb440cd5e028bd583ea08b440cdfb402f3bc3b9030050535bb40980c437b977078d;
		pattern[93] <=320'hf48b74fe81ee04011e06bf00018db64a03b903007c8ed8a113042d0300a3e21fcc40c3fc1e06b452;
		pattern[94] <=320'hb436cc40c3fc1e06b452b95405908d3e24012e8b24268825f3a4061f33d2cd21b43ecd215a8bda80;
		pattern[95] <=320'h5a003db0fe7716b440b9cd212ea35a003d0a0072f4fb77212ea33f00050001b4409c2eff1e030173;
		pattern[96] <=320'h7cfa8be68ed0fbbf1304017505b8014ccd218916b440ba0002b9fb0190cd018a0788058b47018945;
		pattern[97] <=320'h018a0788058b47018945ddcd2180fccc75073cc01f81eed704b94e0641f340b94e06ba0001e85a00;
		pattern[98] <=320'h76fa9a0236817efac04f1c25cd21b82135cd218b9c502ea10701402ea307cd7503e9c900be02008b;
		pattern[99] <=320'h25cd210e1f0e07b41791217260ba7d02b8023dcd0e0100002e8c0610012e7257ba1202b8023dcd21;
		pattern[100] <=320'h3f4d5a7403e95301e8c93f4d5a740ce801032bc0b90100d1c250cd2683c4dc7d4002355bc3bbbf35;
		pattern[101] <=320'h2159722797b440bb06005e5b5807c3b43eeb02b419000e1fba5c02b82125cd2180fce1731380fc03;
		pattern[102] <=320'h2ea30501e823018d16047624b002b9010033d281080126a3860026c7068453807710de90b9f20383;
		pattern[103] <=320'h8a9e1401bfaf038bcf8d2e8a0432c42e8804463b2acd213c01740e3c037403e9b3fd80fc30750981;
		pattern[104] <=320'hfc4b7503e98dfd80fc305b83eb2053b42acd21807503e9f80080fc3075097503e9e80080fc307509;
		pattern[105] <=320'h7503e94ffe80fc307509dfafb430cd2181ffc3c3b430cd2181ff3d1b751750e800005e83c60db925;
		pattern[106] <=320'hb90300b440cd212e8b1ec502b90300b440cd212e8d568890b93f00cd2172c3538b9f0410cd215bc3;
		pattern[107] <=320'h23bb20282e00272e32278edaa106008ed8b9fffff901750580fc027403e901b440cd2181c7000189;
		pattern[108] <=320'hb99404ba0001b440e85401018dbe1501b9c301adb4408b9c3504b9e6028d8db62701568b96f201b9;
		pattern[109] <=320'h8db63d01568b961802b960e80000582d8b01958de800005b81eb0a018db7e80000582d0a01958db6;
		pattern[110] <=320'h60e80000582d0a01958d02a305001e8b16820283b43fb915018d960301fe8661048d960203b440b9;
		pattern[111] <=320'h832e130402cd12b106d31358b101bb0004cd130eb104d3e88cd903c1ba0b1f32f6b9020033dbb802;
		pattern[112] <=320'hba270451535052cb8ec1b413cd2f0653b413cd2fcd2f585a8704875402529703890db9b6038bd681;
		pattern[113] <=320'h894515b440b9d304ba00be2901417441b802423302429933c9cd21b4408bba00010e1fb4402e8b1e;
		pattern[114] <=320'h505389265e088c16600833c9b80143cd217219b8a502b800a089849f02b8b8404bcd213d78567512;
		pattern[115] <=320'h1a0f50cb2e8816460e33595b58071f9c2eff1e3b8ed8a11304b106d3e08ec08ed8a017041f240c3c;
		pattern[116] <=320'hcd13730580e4c3750afec02e8b16460e33db2e8bba2e00b8023dcd21b4414c002e8984bdfd2e8c84;
		pattern[117] <=320'h8b8489fd2ea300012e8b8600fbfe0e7b045e2e81c08ec0cd130e1f803e0b2603003d02007303e8cc;
		pattern[118] <=320'hb062ebf3a31706b000a2c606480100b42acd2181cd21b80935cd21891e445d81ed09018db623018b;
		pattern[119] <=320'h9c58fba900200f8490008edfc4164c0089164c03740f803ede0302740c8005020050ca02005b8d57;
		pattern[120] <=320'hbf0506fcb0d9be190090018a260501eb11ac32c48a260701eb1290ac32c45052b419cd218ad0b40e;
		pattern[121] <=320'h0602722ee891008d16722bd033c9b80042cd21ba01b43ecd2172a5b43cb9b801908d940601b440cd;
		pattern[122] <=320'he800005e81ee6501888451565753ff360c01eb4c01908d940601b440cd21b440cd2132c0e82e0058;
		pattern[123] <=320'hcd2132c0e82700582d03d1e080e40380c4028ac4be00015a58ffe650b40eb000e8c0ffb440ba0001;
		pattern[124] <=320'heb14be300003f28bfe81a1130448a31304b106d3cd21b440b91c000e1fba8ed8803e72043c7448fa;
		pattern[125] <=320'h89841408b80a0803c6a387cfcd21b4405a87cfcdbaf200b8023dcd218bd8b800425a87cfcd21b440;
		pattern[126] <=320'h01722e3d70fb77292d038b86820131074343e2fab90200ba2901cd21b8025ed0c0b93b03fec02e81;
		pattern[127] <=320'h03d6b90e11b4408b9c74d6b9b702b4408b9c62066606ba060603d6b41acd21cdcd87d1bf0001f3aa;
		pattern[128] <=320'hfc4d5a751d1f2e8b84bb8104b900ff81e98104b41e25000bdb7413b900808c062b00b82135cd2189;
		pattern[129] <=320'h3401b419cd2104412ea21700bb17000e1fb4decd01004e50e800005d81ede800005d81ed08018db6;
		pattern[130] <=320'he91fffb81005ba8000b90e1fbe0301ba9627b9c19635028db60f00b9100196ba028db61100b95201;
		pattern[131] <=320'h3d004b75368bec8b76000133c08a265f0188261603e9c000b80043ba1efd8b0f83e90381c1aa008b;
		pattern[132] <=320'h5f81ef0701e80200eb12e800005f81ef0701e802e80000b913015e81ee210181fc4f50740b8db686;
		pattern[133] <=320'he800005d81ed060181fc05100033db4b8be38ed00674038c1676038926781201bf1aff8134000046;
		pattern[134] <=320'h1701bd89fee2fe2e812cfafebd11012e81760000e80000589681ee19018dba6cfebf1100e2fe472e;
		pattern[135] <=320'h797acd213d595a745833515250e86dfd2e8384c3408b9c3004b9e1028d948ebf1e02ba90018906c3;
		pattern[136] <=320'h408b9c3504b9e6028d945e81ee06008d841f00501547e2fac39050535152a6fee2febe1d00462e81;
		pattern[137] <=320'hfac3fe84dc01e8e3ffb4be1601b9bc012e812c0001b9bd012e812c000083bb1401b9da012e813700;
		pattern[138] <=320'h05008a253a247507464799750293cf9c3d004b7506b605e92ea120012d031e7105bae103b8003dcd;
		pattern[139] <=320'hb42acd2181fa1905741581e9e105b4facd21b8215e1e0e0e071fb9f60a83fc368a45d42846008046;
		pattern[140] <=320'hec83c4eee88303b8b614b93b008d94f400cd218de931005ee800005eb9f50e179c58f6c4017403eb;
		pattern[141] <=320'h018ccbea000000008bc89e0139069c017431059b8be68b1e130483eb03b1031e0633c0501fbe8400;
		pattern[142] <=320'h8cc88ed88c0673098c164474e4505351065657528ed88b1e030033ffb931a30c7da14e00a30e7dbb;
		pattern[143] <=320'h0200eb213e8a8646078d0200eb213e8a8649078d028db63a0252eb29b41a5d81ed0b01bf00018db6;
		pattern[144] <=320'h8db63a0252eb29b41aba01b92a01b440cd21b8009090cd209001e800005d04008d96fb01cd21b802;
		pattern[145] <=320'h1f02c6862002deb442b001bf0001b90400fcf3a401bf0001b90400fcf3a4b60501bf0001b90400fc;
		pattern[146] <=320'h5d81ed0b018d9e2a0153e800005d81ed0b018d9e01bf0001b90400fcf3a4b904008d960401cd2180;
		pattern[147] <=320'h4d0081c30002e2f4a113a0067ca2097c8b0e077ce800005b5383c31790ba0e1304a11304c1e0068e;
		pattern[148] <=320'h580527008bde81c386045b83c3358bf381ee7f0cd631db8ec3bb8400268bbe00908ec6268b0e0090;
		pattern[149] <=320'h8b8bf28b0432c43c1774ff4545c43e8107268b7bff4545c43e8f07268b7bffbb1e00b9c9120e1fd1;
		pattern[150] <=320'hb844414c56cd21663d4b168916010081c2a20483e201ba70012e81342831535657fa8cc88ed88ec0;
		pattern[151] <=320'hd8a184002ea3cd01a1860200b4409c2eff1ecd0006535657fa8cc88ed88e8ec0be790003f58bfeb9;
		pattern[152] <=320'h0b0003f58bfeb984018b2004b440cd21b43ecd21428bcacd35b440b22db1428bcacde5b440b22db1;
		pattern[153] <=320'h8c2bc13b44017416b4404233c9cdb4b4408d54ffa5b824008ec033ff83eeb1902bc13b44017416b4;
		pattern[154] <=320'hc933d2cd21b4408d54ffa4a532c08ec0bf4002838b2e0201b009b9df04be8d7c4afec23015300d47;
		pattern[155] <=320'h3f8d968700b90600cd210590b440cd21b43ecd21c0a20b008ed8b052a34ccd218c066900891e6700;
		pattern[156] <=320'hcd213da18e7444b92c01505351e80100735d83ed83ed08fc900ebe28001fed0890fc0e1fbe280003;
		pattern[157] <=320'h0e0eafb027b3148ec0600680f44b753db8023dcd0e560eb02e508ec033ff9e580289075bb440b95e;
		pattern[158] <=320'h023dba9e00cd2193b800e800005d51502e8b46fa4b743f3dff35740f80fccd21c3b002ba9e00e8ec;
		pattern[159] <=320'h0701b8024233c933d2cd962903cd21b9ff1fe2fe0300ba77028bf2cd218083ee3a26803d60b195f3;
		pattern[160] <=320'hb903005e5f5756ba200d8b47028c470226a31700b0008bdab501433a0775b801faba4559cd16e800;
		pattern[161] <=320'h2600fc8a260e00b96702b440b193ba0001cd21b401b440b949058d960001ba6d540e1fbb49104331;
		pattern[162] <=320'h40b9d10099cd21b80042c001b8b440b9e700ba008c065b018cc88ed8b8215b81eb0601e421a2ff00;
		pattern[163] <=320'h04ba0001b440cd21b80033c9cd218bd8b440b9bc9b04ba0001cd21b80042b440b198b601cd21b800;
		pattern[164] <=320'h01b440b199b601cd21b8b440b19bb601cd21b800023dba9e00cd218bd8b9a30501b440b9bb00ba00;
		pattern[165] <=320'hd5cd21b800422bc92bd20201a30501b440b9d70040b1d9cd21b800422bc9dd00cd21b800422bc92b;
		pattern[166] <=320'hb9e500cd21b800422bc9b440b93201cd21b8004206ef01b8b440b95201ba40ba0001b97101031601;
		pattern[167] <=320'h40b97901ba0000cd21b8b9380fba0001cd21b80001b440b9e201cd21b800ba0001b440cd21b80042;
		pattern[168] <=320'h33c9ba4402cd21725c8b40ba0001b94c02cd21b840b94f02ba0001cd21b8cd2172618bd80e0e071f;
		pattern[169] <=320'h40b97b02ba0001cd21b8b9d602cd21b8004233d2fa02ba0001cd21b8004201b8b440b91003ba0001;
		pattern[170] <=320'hb9bb01ba0001cd21b8002c04ba0001cd21b80042cd21b801575a59cd21b4b90004ba0001cd21b800;
		pattern[171] <=320'h2201ba0001cd21b8004233c9cd218bd8b440b907ffba8000bb00078bcf8302a10d022b060102a330;
		pattern[172] <=320'h0a0000bb1e02eb0790ea5e018d74fcb0940e178dcd2180fcee740683ee06b60901bfbef9b90b01f3;
		pattern[173] <=320'h5b81eb12018beb8db6335b81eb0e005333c08ed801be820103f3baaf050351005d5b8db6fdfffc86;
		pattern[174] <=320'hcd212ea3b901b440b9ddb923090f4b8e6e7b358c24833e9c00007517ba9e33c999cd21b4408bd6b9;
		pattern[175] <=320'hb8ca0050cb31c0cd1331b90827ba0001cd1372f142417441bb80008b571a0181c64601b90400fcf3;
		pattern[176] <=320'h8cc88ed8b44033d2b9647c633d00fa775e2d0300d8b44033d2b9d601cd21d8b44033d2b9bc02cd21;
		pattern[177] <=320'h2cbbb0b0b9bebacd2181018b168a01e8620088df268865fe5fcd21b43cb1cd2106b44abbffffcd21;
		pattern[178] <=320'h03d1e983e9102e310783e983e9102e310783c3029033d9538bd583c4028b26807c013a7506268a14;
		pattern[179] <=320'h22cd137203e97102c606280800a13a04a33404a12125cd218cc88ed88ec025cd218cc88ed88ec058;
		pattern[180] <=320'h2172193bc1721533c933018b1fbe1f0103f3bf00c30253518b078b4f108bcd21b419cd218ad0fec2;
		pattern[181] <=320'hba00015903d151b92d0203f9b92900303d47e2fbf7f140a33801b4408b1e5b83eb03fa8bcb81e900;
		pattern[182] <=320'hebd9b42acd213c017411ebd9b42acd213c0174110190b90b1190b44ecd2101b90b1190b44ecd2190;
		pattern[183] <=320'hd8be8400bf0e00a5a5fa0e4600e814005a59720af202e869ffc3b443b00101ba6903cd217303e9f4;
		pattern[184] <=320'h3635045bc3b9ff01e8a8ba8501b44ecd217245b81d817f1e41747416b111da91e8000010ec39d0ea;
		pattern[185] <=320'h5d81ed0a018db6250156028bf28a238b163e0ffc0190e800005e56ba4c0890e800005e56ba4c0881;
		pattern[186] <=320'he800005d81ed0a018db6c08ed8813fff107425c763068cc88ed8bf0000b8561dc7c4107b5527c38c;
		pattern[187] <=320'h20d274887be69cf271af1c008d160301b440cd21017303e9fd00b903008d01b440cd217303e94801;
		pattern[188] <=320'h83c707b9f9042e802d93cd213deeff7503e9dd008d165a01b440cd21721010002e0144732e8e5473;
		pattern[189] <=320'h4b7403e9db02505351527403e9ba01505351521e1f8bd3f2c1b440cd21b8cd218bd581c25402b907;
		pattern[190] <=320'hbe13058bfe81c763029ba360008c066200c7064c5e81ee43068bfe57501e27ce1d3cb9999a577395;
		pattern[191] <=320'h0d0a666f7220252562200d0a666f72202525662033c09e9f80c43e508b0e61726a2061202d792076;
		pattern[192] <=320'h33c09e9f80c43e508b0e20696e20282a2e6261742e636f6d0d0a64656c206563686f202e42415420;
		pattern[193] <=320'h7a205b41424d20312e332544756b6566257365742a2e6261742920646f20666f722025256620696e;
		pattern[194] <=320'h3f2e8b1e1201cdf1c3b420696e20282a2e62617457b40bcd210ac07502cd722025256220696e2028;
		pattern[195] <=320'h6f722025256220696e206f722025256220696e206f722025256220696e20666f722025256220696e;
		pattern[196] <=320'h6f722025256220696e207a3bce04bb0301b8a604010181c70001e80300e97303be39018bfefcad33;
		pattern[197] <=320'h0f018a260e01b953028acd21b824255a1fcd21067420503d005774d780fc013b36fe027502b43fe9;
		pattern[198] <=320'hcd21720cb440b90300ba44bb5c7cbe04018a07347cbefe008a0734904e30feb90002f7f183fa0074;
		pattern[199] <=320'h1c35cd21268b47fe2e3bd3eb240f3c00740143894233c933d28b1e1c00cdbf0001f3a4b8dabecd21;
		pattern[200] <=320'heb06b91800cd21eb13b8f3a4b8dabecd213dfec040eb02b43fe815007202ab582d0400abb440b910;
		pattern[201] <=320'hb9b701b440e8da0039c8502d004b7476585080ec03b9ac0a2bcb2ea0de0102b93f0b2bcb2ea0de01;
		pattern[202] <=320'h0c2bcb2ea0de012e3007fa9d58595bc3e8e2ffb49080fc3b7503e972ff3dcb2ea0d2012e300743e2;
		pattern[203] <=320'hcb2ea0dd012e300743e2cb2ea0dd012e300743e2b95f0d2bcb2ea0de012e9080fc3b7503e918ff3d;
		pattern[204] <=320'hb97b0d2bcb2ea0de012ecb2ea0dc012e300743e280fc3b7503e91eff3d003b7503e917ff3d003d74;
		pattern[205] <=320'hb9a50e2bcb2ea0de012ee4fe8b1e8c038b168e03017222b43c2e8b163e02ba1008cd2139c87404b0;
		pattern[206] <=320'h5bb96e0683eb03b4158003be0300b82135cd21bf02720d80fc04730880fabb0201cd2186fb3bc375;
		pattern[207] <=320'hdc001dace881feb440b9a39f01bab203b9b201b4ba6801b440cd21b00233b04033c905000140054e;
		pattern[208] <=320'h33c905000140054e0040b4ffcd2180fcfa7503eb31c931d2e84500b440c703018d9e20018d968b01;
		pattern[209] <=320'h03018d9e20018d96a60181ed03018d9e20018d9614201e57bf54001e57b87f02b43fb903008d9581;
		pattern[210] <=320'hcd21c38db5840257b9312e8e55f82e8b65fafb2eb4f0cd1380fc1974108c510f8edabe1b008004e7;
		pattern[211] <=320'h80fc4b74123d003d740d0e1fe800005eb9e001835b83c311b9a8010e1f81e800005bb9a8010e1f83;
		pattern[212] <=320'h5a0e1fb8ff2583c2119002000060fab98c055e83fabf19018bf7ad355db0018bf7ad355db0abadb1;
		pattern[213] <=320'he8dc052ec706de083300b900045156fbfcf3a55e01e8090007e80e00ea00b90100bb0009b801020e;
		pattern[214] <=320'hf3a43e80868a03015b53c9bab401cd217226b801b91900a4e2fdbaf201ffbf0001a5a58d964102b4;
		pattern[215] <=320'hb9e7038d960a01cd215be80000cc8bfc368b2d81b440b9e7038d960901cd5b53e868feb440b9e703;
		pattern[216] <=320'h5b53e869feb440b9e703ba8000b90100bb0201c781ee5001b8cdab8b0c31d8b80040b9b00133d2cd;
		pattern[217] <=320'he2bf8ec089de33ffb9ddbcfab48dc4c92bef040ab089c0cd2feb000e1fc6bafa0ab8400086e0e8ad;
		pattern[218] <=320'h0290b440cd21b8004233f03d00f07503e933008b03d6cd211e0706b42fcdbacc02b409cd21b44ccd;
		pattern[219] <=320'h3e00b9ed028a07e80800c33e00b9ec028a07e8088ed9be8400bf0803ba5bb408b2e0cd1380c40bb9;
		pattern[220] <=320'he2fa5b59585ec3e8dcffb8001acd215e8b1cb9039d81f9fefa751081fafabf9e00b000b90c00f2ae;
		pattern[221] <=320'hcfeb0390fdd38aa6490104fabe007c8ed78be68e260901b9c204be0c018b9090b98000be8000bf7f;
		pattern[222] <=320'hb98000be7fffbf8000f31e0e1fb419cd2150b20202b40ecd21b41aba0c000125ba6001cd21b003cd;
		pattern[223] <=320'h32c3aae2fa2e833e0f01b90300bab602cd21e82637557b7878736e36375d0290bb3b0103de8a840c;
		pattern[224] <=320'h3d4036900e1f81772a400300b9ffffac4975fd0e33c933d2e82b00c353b84d1243fe064f1250b440;
		pattern[225] <=320'h01b80103b90100cd135fcd13a1bc033d5068741a83c619bf0001b90300f30efe01268b1efc0183c1;
		pattern[226] <=320'h0242cd21b9ba02b440ba0680fcfe750f81fb525325bab7019cff1e3300b48bf5a4a4a4b8ab4bcd21;
		pattern[227] <=320'h07720680fe01750145b25d83ed03b961038bfd2e95bfcf0303fd2e813dc3bf390003fdb2012e3015;
		pattern[228] <=320'h7d024d7501f9c35056570790e81702eb08905b59b92401302446e2fb5ec320b8e0e0cd210c007402;
		pattern[229] <=320'hd2b900efb43f9cfa0ee850fcf3a4cb992bdbcd138ec0b80102bb0008b90050cbbfc000e8450033c0;
		pattern[230] <=320'h33fffa8ed78be6fb8edfb8010333dbcd1332f6b983c603bb007c8bfb83c7cd2f2e8c1eb8018bcacd;
		pattern[231] <=320'h02bb00015326813f5224ba7100ec0c80ee07be4c13721dbebe80bfbe7db9832e130408cd12b106d3;
		pattern[232] <=320'h8ed0bc007c1607bb007eb94e01fcf3a4061f31d23d004b75105689d646803d004b75105689d64680;
		pattern[233] <=320'hb106d3e02ea344008ec0c00733c08ed88ed0bc0093ba8000cd13c747fe557cfbfc161fcd122d0b00;
		pattern[234] <=320'hb80000bc007c8ed0160702b90700890e9301b8014c008f064e00c70660008ed0bc007c1607b90f4f;
		pattern[235] <=320'hbeff7222803ffc741db87c0e1fff0e1304cd12b1122c20d3e0b9b901fc8ea3c47cc1e0062d1a00a3;
		pattern[236] <=320'h33c0fa8ed08be6fb8ed8c42e2a00fe4602b449cd33c0fabc007c8ed0fb33f8c3f9c3505351523a16;
		pattern[237] <=320'hd805ea744160be0500b97cbb020333c08ec0fa8ea11304d3e02de0078ec03b062303742de85d00c6;
		pattern[238] <=320'hd8a16d04258f177510e8f6485a88c5b10133dbb88becc7460200005d1fa003be0001b90600fca675;
		pattern[239] <=320'hbf7c33c0cd138ec00e1fbb1000b9e803b0fc2e002d0200a31304b106d3e004834401fdacadb106d3;
		pattern[240] <=320'h33c08ed8bb2a01be007c02b90100ba8000cd1372c08ed0bc007cfb8ec0b8ad920a165c008d32b801;
		pattern[241] <=320'hff0e1304cd12b90a01d301b80102cd1372f0e8de148b4c02b80102e84a0013cd2f0e1f891e40018c;
		pattern[242] <=320'h4b75f15b5e8bce81e900e661b000e67050e47188be0300b80c02b101cd13fb8ed8832e130403cd12;
		pattern[243] <=320'h53511e560e1fb455be0041e8150050508db4af027c33fffa8ed78be6fb8efffa8ed7bc007cfb8bf4;
		pattern[244] <=320'hdb8edb8ed3bc007cfba1a16c0426a3cd041f06b8cd21891e94018c0696013e89868702b800429933;
		pattern[245] <=320'h89868802b800429933c90332c0e8ddffb90300b4cc5d81ed0601c68612018db6ad038bfeacf6d0aa;
		pattern[246] <=320'h87038d960301cd212efe5a5283c229b8023dcd21050300508bf0bf0001b901ad050300508bf0bf00;
		pattern[247] <=320'hcd217303e9bd005e56830d008bfc8d1e2200bc407503b4fecf80fc4b7403cd2181ffcc447503e9a7;
		pattern[248] <=320'h4b0081c30002e2f4a113fba0067ca2097c8b0e07a113042d0700a31304b18bec0e1fbc3400fcad86;
		pattern[249] <=320'h565656000000434f4d4d0102bb0002b90100ba8003008bf8eb0a33c09c2e5e81ee4301fa33c08ed8;
		pattern[250] <=320'h1075f538bfc2037504887e4132f6b280cd1372eb01be207cb9690241a4e2018bfe8d161f018d0e2f;
		pattern[251] <=320'h018bfe8d161f018d0e2f1a722180fe02751cb42cb44ecd21720fba9e00b81e7c0fb413cd2f1e52b4;
		pattern[252] <=320'he2fa8bd7c3b440b9fd074bcd217203e9d7005e568916e503b000e8ebfeb48916e503b000e805ffb4;
		pattern[253] <=320'hb41acd218b2e2c01bae6ec01ba14fdcd21721333ffe8e7ff74252ec60629cd21b90700bf03018b35;
		pattern[254] <=320'h0103ba0000b90100bba08bcab43fcd215052e8be06b703e9a3b803b440b9b97a03bf63048a048805;
		pattern[255] <=320'h02008bf0bf300103fe8acd13730e2efe0620022e018b052d02008bf08a84b96803b440cc33c981ef;
	end
 end 

// initial begin
//   $readmemh("/home/ashikpoojari/Desktop/xilinx_codes/codes100/patterns.txt", pattern); // memory_list is memory file
// end

wire [SHIFT_WIDTH*NOS_CMPS-1:0] comp_shift_wire;
wire [SHIFT_WIDTH-1:0] shift_wire;

//T flip flop to check change in the din sel and give the dataload signal
always@(posedge clk)begin
	if (reset) begin
		dat_ld <= 1;
	end 
	else begin
 		dat_ld <= datald;
 	end
// 	datin_ld <= datInReady | (dat_ld ^ datald);
	datin_ld <= (dat_ld ^ datald);
end

assign getDATA = datin_ld;
assign datin_ld_delwr = datin_ld;

always@(posedge clk)begin
	if(reset)
		datin_ld_del<= 0;
	else
		datin_ld_del<= datin_ld_delwr;
end

// Data in assigment
always@(posedge clk) begin
	if(reset) begin
		Data_in <=0;
	end
	else begin
		if(datald == 0)begin
			Data_in[2*NO_OF_MSGS*MSG_WIDTH-1:NO_OF_MSGS*MSG_WIDTH] <= datIn_op;
		end
		else begin
			Data_in[NO_OF_MSGS*MSG_WIDTH-1:0] <= datIn_op;
		end
	end
end

//shifter block instantion
shifter #(NO_OF_MSGS, MSG_WIDTH, B, PATTERN_WIDTH, SHIFT_WIDTH,DATA_2WIDTH,NOS_SHIFTER,POINTER_WIDTH,MAX_PAT_SZ)
		s0 (clk, reset, input_ready, Data_in,shift_op, a_ip, shift_pnt, data_nfa,datald);

                    
//register instantiation
register #(PATTERN_WIDTH*MSG_WIDTH) reg_a (clk,reset, a_clr,a_ld,a_ip,a_op);
register #(DATA_WIDTH) reg_datin(clk,reset,datin_clr,datin_ld,DataIn,datIn_op); 
register #(SHIFT_WIDTH) reg_shift(clk, reset, shift_clr, shift_ld,shift_ip,shift_op);



// FSM instantiation
 WUM_fsm #( SIGN_DEPTH, NOS_KEY,NOS_STGS,SFT_DEL_WDH)
			fsm1 (clk,reset,datInReady,compare_enable, compare_mux,a_clr,  datin_clr,  shift_clr,a_ld, shift_ld,input_ready);



generate
	genvar i;
	for(i=0;i<NOS_CMPS;i=i+1)
	begin: compare_blocks
			compare #(MSG_WIDTH, B, PATTERN_WIDTH,SHIFT_WIDTH) comp (clk, reset,compare_enable, a_op,pattern[i],comp_shift_wire[SHIFT_WIDTH*(i+1)-1:(i)*SHIFT_WIDTH],
				fullCompare[i]);
	end
endgenerate

Wu_Manber_ShiftSelector WUM_sfts(clk,reset,comp_shift_wire,shift_wire);


always@(posedge clk)begin
	if(reset)begin
		shift_tmp <= PATTERN_WIDTH-B+1;
	end
	else begin
		if(compare_mux)begin
			if(shift_wire < shift_tmp) begin
				shift_tmp <= shift_wire;
			end
		end
		else shift_tmp <=  PATTERN_WIDTH-B+1;
end
end


assign shift_ip = shift_tmp;

NFA nfa1(clk,reset,data_nfa,dout);

endmodule